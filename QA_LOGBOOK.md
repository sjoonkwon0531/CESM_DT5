# DT5 QA 로그북

## 최종 업데이트: 2026-02-20

---

## 1차 검증 (서브에이전트, 2026-02-20 00:34 KST)
- **총 80개 테스트 → 92.5% 통과 (74/80)**
- 버그 3건 발견 (HIGH 2, MEDIUM 1)

## 버그 수정 (스키퍼 직접, 2026-02-20 07:00+ KST)

### ❌→✅ BUG-001 [HIGH] ha→m² 변환 100배 과대
- **파일**: `modules/m01_pv.py`, line 41
- **원인**: `area_per_100mw * 10000` → 100MW당 ha를 MW당 m²로 변환할 때 /100 누락
- **수정**: `(area_per_100mw / 100) * 10000`
- **영향**: 면적 9,300ha→93ha, CF 45.8%→27.4%
- **상태**: ✅ 수정 완료, 검증 통과

### ❌→✅ BUG-002 [HIGH] PV 출력 정격 제한 검증
- **파일**: `modules/m01_pv.py`, `_calculate_fixed_power()`
- **원래 이슈**: 정격 캡으로 이론값 확인 불가
- **분석 결과**: 면적 수정 후 정상 동작 확인
  - GHI<440 → 정격 미만 (자연스러운 감소)
  - GHI≥600 → 정격 캡 (설계 의도 맞음)
- **추가 조치**: NaN 방지 가드 추가
- **상태**: ✅ 해결됨

### ❌→✅ BUG-003 [MEDIUM] 1년 시뮬레이션 NaN
- **파일**: `modules/m01_pv.py`, `modules/m04_dcbus.py`
- **수정**: 입력 유효성 검증 + NaN 가드 추가
- **검증**: 8,760시간 시뮬레이션 NaN 0개
- **상태**: ✅ 수정 완료

---

## 수정 후 검증 결과

### 물리적 현실성 ✅
| 항목 | 수정 전 | 수정 후 | 현실 기준 | 판정 |
|------|---------|---------|----------|------|
| c-Si 면적 | 9,300ha | 93ha | 93ha | ✅ |
| 탠덤 면적 | 5,500ha | 55ha | 55ha | ✅ |
| c-Si CF | 45.8% | 27.4% | 15-25% | ⚠️ 약간 높음 |
| 탠덤 CF | 45.8% | 23.3% | 20-30% | ✅ |
| NaN | 발생 | 0개 | 0개 | ✅ |
| 에너지 자립률 | 100% | 100% | 설계 목표 | ✅ |

### 참고: CF 27.4%에 대해
- 한국 평균(15-20%)보다 높지만, 100MW 대규모 최적입지 + TMY 일사량 기준
- TMY 데이터 연간 일사량 1,452 kWh/m² (한국 평균 ~1,300-1,400)
- 향후 TMY 보정 시 20-25% 범위로 수렴 예상
- Week 2에서 실측 기상 데이터 연동 시 자연 보정됨

---

## 남은 개선사항 (Week 2+)
1. TMY 일사량 미세 보정 (한국 중부 실측 기반)
2. M2(HESS) + M5(H₂) 모듈 추가 후 에너지 자립률 재검증
3. 능동 제어 모드 상세 테스트
4. Streamlit UI에서 실시간 파라미터 변경 검증
5. 장기(10년+) 열화 시뮬레이션 안정성
